var _0x4223=["sf_form","form","sf","isEmpty","","sf_default_mailing_list","default_mailing_list","user_email","user_ml_optin","ml_optins_collection","user_retargeting_consent","ae","ae_brand_id","brand_id","ae_segment_id","segment_id","ae_activities","activities","am_dev_token","dev_token","am","am_save_mode","save_mode","library","am_playlists","playlists","resources","isArray","am_custom_playlist_name","custom_playlist_name","am_albums","albums","mk_instance","smf_subs_url","subs_url","smf","https://subs.sonymusicfans.com/submit","apple_url","https://apple.sonymusicfans.com/save/","smf_api_url","api_url","https://forms.sonymusicfans.com/wp-json/smf-api/v1/","smf_campaign_id","campaign_id","smf_campaign_key","campaign_key","loaded","new_apple_presave","undefined","length","music","includes","key","push","removeItem","log","catch","configureMusicKit","getDevToken","https://cdn.smehost.net/formssonymusicfanscom-appirioprod/wp-content/uploads/2019/07/sony_music_logo.png","Sony Music Entertainment","configure","reject","Content-Type","application/json","campaign_token/?campaign_id=","&campaign_key=","&format=json","GET","request","token","amk_jwt/?campaign_id=","&campaign_token=","jwt","error","Missing dev token credentials","resolve","getInstance","Missing dev token","isAuthorized","Unauthorized","success","then","libraryPresave","in doAction catch err: ","playlistSave","playlist","librarySave","authorize","self.loaded = false","Loading is not yet complete. Please wait a few seconds and try again.","state","formSubmission","addTracksToPlaylist","createPlaylist","addToLibrary","api","/me/library/playlists","POST","makeAPICall","id","data","Custom playlist name is empty.","songs","map","/me/library/playlists/","/tracks","Playlist ID is empty","canEdit","Authorization","Bearer ","developerToken","music-user-token","musicUserToken","url","application/x-www-form-urlencoded; charset=UTF-8","Apple","mailing-list-id[","]","each","retargeting_consent","&","join","=","keys","Email address is empty","presave","mailing_list_ids",",","open","header","value","setRequestHeader","responseType","json","onload","status","response","statusText","onerror","PUT","stringify","send"];class SMEAppleMusic{constructor(_0x482bx2){const _0x482bx3=this;this[_0x4223[0]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[2]][_0x4223[1]])?_0x482bx2[_0x4223[2]][_0x4223[1]]:_0x4223[4];this[_0x4223[5]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[2]][_0x4223[6]])?_0x482bx2[_0x4223[2]][_0x4223[6]]:_0x4223[4];this[_0x4223[7]]= _0x4223[4];this[_0x4223[8]]= false;this[_0x4223[9]]= [];this[_0x4223[10]]= false;this[_0x4223[11]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[11]][_0x4223[11]])?_0x482bx2[_0x4223[11]][_0x4223[11]]:_0x4223[4];this[_0x4223[12]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[11]][_0x4223[13]])?_0x482bx2[_0x4223[11]][_0x4223[13]]:_0x4223[4];this[_0x4223[14]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[11]][_0x4223[15]])?_0x482bx2[_0x4223[11]][_0x4223[15]]:_0x4223[4];this[_0x4223[16]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[11]][_0x4223[17]])?_0x482bx2[_0x4223[11]][_0x4223[17]]:_0x4223[4];this[_0x4223[18]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[20]][_0x4223[19]])?_0x482bx2[_0x4223[20]][_0x4223[19]]:_0x4223[4];this[_0x4223[21]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[20]][_0x4223[22]])?_0x482bx2[_0x4223[20]][_0x4223[22]]:_0x4223[23];this[_0x4223[24]]= !this[_0x4223[3]](_0x482bx2[_0x4223[20]][_0x4223[26]][_0x4223[25]])&& Array[_0x4223[27]](_0x482bx2[_0x4223[20]][_0x4223[26]][_0x4223[25]])?_0x482bx2[_0x4223[20]][_0x4223[26]][_0x4223[25]]:[];this[_0x4223[28]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[20]][_0x4223[29]])?_0x482bx2[_0x4223[20]][_0x4223[29]]:_0x4223[4];this[_0x4223[30]]= !this[_0x4223[3]](_0x482bx2[_0x4223[20]][_0x4223[26]][_0x4223[31]])&& Array[_0x4223[27]](_0x482bx2[_0x4223[20]][_0x4223[26]][_0x4223[31]])?_0x482bx2[_0x4223[20]][_0x4223[26]][_0x4223[31]]:[];this[_0x4223[32]]= null;this[_0x4223[33]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[35]][_0x4223[34]])?_0x482bx2[_0x4223[35]][_0x4223[34]]:_0x4223[36];this[_0x4223[37]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[35]][_0x4223[37]])?_0x482bx2[_0x4223[35]][_0x4223[37]]:_0x4223[38];this[_0x4223[39]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[35]][_0x4223[40]])?_0x482bx2[_0x4223[35]][_0x4223[40]]:_0x4223[41];this[_0x4223[42]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[35]][_0x4223[43]])?_0x482bx2[_0x4223[35]][_0x4223[43]]:_0x4223[4];this[_0x4223[44]]=  !this[_0x4223[3]](_0x482bx2[_0x4223[35]][_0x4223[45]])?_0x482bx2[_0x4223[35]][_0x4223[45]]:_0x4223[4];this[_0x4223[46]]= false;this[_0x4223[47]]= _0x482bx2[_0x4223[20]][_0x4223[47]];if( typeof localStorage!== _0x4223[48]){const _0x482bx4=[];for(let _0x482bx5=0;_0x482bx5< localStorage[_0x4223[49]];_0x482bx5++){if(localStorage[_0x4223[52]](_0x482bx5)[_0x4223[51]](_0x4223[50])){_0x482bx4[_0x4223[53]](localStorage[_0x4223[52]](_0x482bx5))}};for(let _0x482bx6=0;_0x482bx6< _0x482bx4[_0x4223[49]];_0x482bx6++){localStorage[_0x4223[54]](_0x482bx4[_0x482bx6])}};_0x482bx3[_0x4223[57]]()[_0x4223[56]]((_0x482bx7)=>{console[_0x4223[55]](_0x482bx7)})}isEmpty(_0x482bx9){return !!( typeof _0x482bx9=== _0x4223[48]|| _0x482bx9=== _0x4223[4]|| _0x482bx9=== []|| _0x482bx9=== null|| _0x482bx9[_0x4223[49]]=== 0)}async configureMusicKit(){const _0x482bx3=this;try{ await _0x482bx3[_0x4223[58]]();MusicKit[_0x4223[61]]({developerToken:_0x482bx3[_0x4223[18]],app:{icon:_0x4223[59],name:_0x4223[60]}});_0x482bx3[_0x4223[46]]= true;return true}catch(err){console[_0x4223[55]](err);return Promise[_0x4223[62]](err)}}async getDevToken(){const _0x482bx3=this;if(_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[18]])){if(!_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[42]])&&  !_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[44]])){const _0x482bxc=[{header:_0x4223[63],value:_0x4223[64]}];const _0x482bxd=`${_0x4223[4]}${_0x482bx3[_0x4223[39]]}${_0x4223[65]}${_0x482bx3[_0x4223[42]]}${_0x4223[66]}${_0x482bx3[_0x4223[44]]}${_0x4223[67]}`;try{const _0x482bxe= await _0x482bx3[_0x4223[69]](_0x482bxd,_0x4223[68],_0x482bxc);const _0x482bxf=_0x482bxe[_0x4223[70]];const _0x482bx10=`${_0x4223[4]}${_0x482bx3[_0x4223[39]]}${_0x4223[71]}${_0x482bx3[_0x4223[42]]}${_0x4223[66]}${_0x482bx3[_0x4223[44]]}${_0x4223[72]}${_0x482bxf}${_0x4223[67]}`;try{const _0x482bx11= await _0x482bx3[_0x4223[69]](_0x482bx10,_0x4223[68],_0x482bxc);_0x482bx3[_0x4223[18]]= _0x482bx11[_0x4223[73]];return _0x482bx3[_0x4223[18]]}catch(err){return Promise[_0x4223[62]](err)}}catch(err_1){return Promise[_0x4223[62]](err_1)}}else {return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x4223[75]})}}else {return Promise[_0x4223[76]](true)}}doActions(_0x482bx13,_0x482bx14,_0x482bx15,_0x482bx16){const _0x482bx3=this;if(_0x482bx3[_0x4223[46]]=== true){_0x482bx3[_0x4223[7]]=  !_0x482bx3[_0x4223[3]](_0x482bx13)?_0x482bx13:_0x4223[4];_0x482bx3[_0x4223[8]]= _0x482bx14=== true;_0x482bx3[_0x4223[9]]= _0x482bx15;_0x482bx3[_0x4223[10]]= _0x482bx16=== true;_0x482bx3[_0x4223[32]]= MusicKit[_0x4223[77]]();if(_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[18]])){return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x4223[78]})};return _0x482bx3[_0x4223[32]][_0x4223[88]]()[_0x4223[82]](()=>{if(!_0x482bx3[_0x4223[32]][_0x4223[79]]){return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x4223[80]})};if(_0x482bx3[_0x4223[47]]&& _0x482bx3[_0x4223[21]]=== _0x4223[23]&& _0x482bx3[_0x4223[24]][_0x4223[49]]=== 0){return _0x482bx3[_0x4223[83]]()[_0x4223[82]](()=>{return ({state:_0x4223[81]})})[_0x4223[56]]((_0x482bx7)=>{return Promise[_0x4223[62]](_0x482bx7)})}else {switch(_0x482bx3[_0x4223[21]]){case _0x4223[86]:return _0x482bx3[_0x4223[85]]()[_0x4223[82]](()=>{return ({state:_0x4223[81]})})[_0x4223[56]]((_0x482bx7)=>{console[_0x4223[55]](_0x4223[84],_0x482bx7);Promise[_0x4223[62]](_0x482bx7)});case _0x4223[23]:;default:return _0x482bx3[_0x4223[87]]()[_0x4223[82]](()=>{return ({state:_0x4223[81]})})[_0x4223[56]]((_0x482bx7)=>{console[_0x4223[55]](_0x482bx7);Promise[_0x4223[62]](_0x482bx7)})}}})[_0x4223[56]]((_0x482bx7)=>{return ({state:_0x4223[74],error:_0x482bx7})})}else {console[_0x4223[55]](_0x4223[89])};return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x4223[90]})}playlistSave(){const _0x482bx3=this;return _0x482bx3[_0x4223[32]][_0x4223[96]][_0x4223[95]]({playlists:_0x482bx3[_0x4223[24]],albums:_0x482bx3[_0x4223[30]]})[_0x4223[82]](()=>{return _0x482bx3[_0x4223[94]]()})[_0x4223[82]]((_0x482bx18)=>{return _0x482bx3[_0x4223[93]](_0x482bx18)})[_0x4223[82]](()=>{return _0x482bx3[_0x4223[92]]()})[_0x4223[82]](()=>{return ({state:_0x4223[81]})})[_0x4223[56]]((_0x482bx7)=>{return  typeof _0x482bx7[_0x4223[91]]!== _0x4223[48]?Promise[_0x4223[62]](_0x482bx7):Promise[_0x4223[62]]({state:_0x4223[74],error:_0x482bx7})})}librarySave(){const _0x482bx3=this;return _0x482bx3[_0x4223[32]][_0x4223[96]][_0x4223[95]]({playlists:_0x482bx3[_0x4223[24]],albums:_0x482bx3[_0x4223[30]]})[_0x4223[82]](()=>{return _0x482bx3[_0x4223[92]]()})[_0x4223[82]](()=>{return ({state:_0x4223[81]})})[_0x4223[56]]((_0x482bx7)=>{console[_0x4223[55]](_0x482bx7);Promise[_0x4223[62]]({state:_0x4223[74],error:_0x482bx7})})}async createPlaylist(){const _0x482bx3=this;if(!_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[28]])){try{const _0x482bxe= await _0x482bx3[_0x4223[99]](_0x4223[97],_0x4223[98],{attributes:{name:_0x482bx3[_0x4223[28]],description:_0x4223[4]}});return _0x482bxe[_0x4223[101]][0][_0x4223[100]]}catch(err){return Promise[_0x4223[62]]({state:_0x4223[74],error:err})}}else {return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x4223[102]})}}async addTracksToPlaylist(_0x482bx18){const _0x482bx3=this;if(!_0x482bx3[_0x4223[3]](_0x482bx18)){const _0x482bx1c=_0x482bx3[_0x4223[30]][_0x4223[104]]((_0x482bx1d)=>{return ({id:_0x482bx1d,type:_0x4223[103]})});try{ await _0x482bx3[_0x4223[99]](`${_0x4223[105]}${_0x482bx18}${_0x4223[106]}`,_0x4223[98],{data});return true}catch(err){return Promise[_0x4223[62]]({state:_0x4223[74],error:err})}}else {return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x4223[107]})}}getLibraryPlaylists(){const _0x482bx3=this;return _0x482bx3[_0x4223[32]][_0x4223[96]][_0x4223[23]][_0x4223[25]](null,{limit:100})[_0x4223[82]]((_0x482bx1f)=>{const _0x482bx20=[];for(let _0x482bx21=0;_0x482bx21< _0x482bx1f[_0x4223[49]];_0x482bx21++){if(_0x482bx1f[_0x482bx21][_0x4223[108]]){_0x482bx20[_0x4223[53]](_0x482bx1f[_0x482bx21])}};return _0x482bx20})[_0x4223[56]]((_0x482bx7)=>{return Promise[_0x4223[62]]({state:_0x4223[74],error:_0x482bx7})})}async makeAPICall(_0x482bx23,_0x482bx24,_0x482bx1c){const _0x482bx3=this;const _0x482bxc=[{header:_0x4223[109],value:`${_0x4223[110]}${_0x482bx3[_0x4223[32]][_0x4223[111]]}${_0x4223[4]}`},{header:_0x4223[112],value:_0x482bx3[_0x4223[32]][_0x4223[113]]},{header:_0x4223[63],value:_0x4223[64]}];try{const _0x482bxe= await _0x482bx3[_0x4223[69]](_0x482bx3[_0x4223[32]][_0x4223[96]][_0x4223[114]]+ _0x482bx23,_0x482bx24,_0x482bxc,_0x482bx1c,true);return _0x482bxe}catch(err){return Promise[_0x4223[62]](err)}}async formSubmission(){const _0x482bx3=this;if(!_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[7]])){const _0x482bxc=[{header:_0x4223[63],value:_0x4223[115]}];const _0x482bx1c={field_email_address:_0x482bx3[_0x4223[7]],form:_0x482bx3[_0x4223[0]],ae:_0x482bx3[_0x4223[11]],ae_brand_id:_0x482bx3[_0x4223[12]],ae_segment_id:_0x482bx3[_0x4223[14]],ae_activities:_0x482bx3[_0x4223[16]],am_music_user_token:_0x482bx3[_0x4223[32]][_0x4223[113]],source_channel:_0x4223[116]};if(_0x482bx3[_0x4223[8]]=== true){_0x482bx1c[_0x4223[6]]= _0x482bx3[_0x4223[5]]};if(_0x482bx3[_0x4223[9]]!== undefined&& _0x482bx3[_0x4223[9]][_0x4223[49]]> 0){$[_0x4223[119]](_0x482bx3[_0x4223[9]],function(_0x482bx26,_0x482bx9){_0x482bx1c[`${_0x4223[117]}${_0x482bx26}${_0x4223[118]}`]= _0x482bx9})};if(_0x482bx3[_0x4223[10]]=== true){_0x482bx1c[_0x4223[120]]= _0x482bx3[_0x4223[10]]};const _0x482bx27=Object[_0x4223[124]](_0x482bx1c)[_0x4223[104]]((_0x482bx26)=>{return `${_0x4223[4]}${encodeURIComponent(_0x482bx26)}${_0x4223[123]}${encodeURIComponent(_0x482bx1c[_0x482bx26])}${_0x4223[4]}`})[_0x4223[122]](_0x4223[121]);try{const _0x482bxe= await _0x482bx3[_0x4223[69]](_0x482bx3[_0x4223[33]],_0x4223[98],_0x482bxc,_0x482bx27,false);return _0x482bxe}catch(err){return Promise[_0x4223[62]](err)}}else {return Promise[_0x4223[62]](_0x4223[125])}}libraryPresave(){const _0x482bx3=this;return _0x482bx3[_0x4223[126]]()[_0x4223[82]](()=>{return ({state:_0x4223[81]})})[_0x4223[56]]((_0x482bx7)=>{Promise[_0x4223[62]]({state:_0x4223[74],error:_0x482bx7})})}async presave(){const _0x482bx3=this;if(!_0x482bx3[_0x4223[3]](_0x482bx3[_0x4223[7]])){const _0x482bxc=[{header:_0x4223[63],value:_0x4223[115]}];const _0x482bx1c={field_email_address:_0x482bx3[_0x4223[7]],form:_0x482bx3[_0x4223[0]],ae:_0x482bx3[_0x4223[11]],ae_brand_id:_0x482bx3[_0x4223[12]],ae_segment_id:_0x482bx3[_0x4223[14]],ae_activities:_0x482bx3[_0x4223[16]],am_music_user_token:_0x482bx3[_0x4223[32]][_0x4223[113]],source_channel:_0x4223[116]};if(_0x482bx3[_0x4223[8]]=== true){_0x482bx1c[_0x4223[6]]= _0x482bx3[_0x4223[5]]};if(_0x482bx3[_0x4223[9]]!== undefined&& _0x482bx3[_0x4223[9]][_0x4223[49]]> 0){_0x482bx1c[_0x4223[127]]= _0x482bx3[_0x4223[9]][_0x4223[122]](_0x4223[128])};if(_0x482bx3[_0x4223[10]]=== true){_0x482bx1c[_0x4223[120]]= _0x482bx3[_0x4223[10]]};const _0x482bx27=Object[_0x4223[124]](_0x482bx1c)[_0x4223[104]]((_0x482bx26)=>{return `${_0x4223[4]}${encodeURIComponent(_0x482bx26)}${_0x4223[123]}${encodeURIComponent(_0x482bx1c[_0x482bx26])}${_0x4223[4]}`})[_0x4223[122]](_0x4223[121]);try{const _0x482bxe= await _0x482bx3[_0x4223[69]](_0x482bx3[_0x4223[37]],_0x4223[98],_0x482bxc,_0x482bx27,false);return _0x482bxe}catch(err){console[_0x4223[55]](err);return Promise[_0x4223[62]](err)}}else {return Promise[_0x4223[62]](_0x4223[125])}}request(_0x482bx2b,_0x482bx24,_0x482bxc,_0x482bx1c,_0x482bx2c){const _0x482bx3=this;return  new Promise((_0x482bx2d,_0x482bx2e)=>{const _0x482bx2f= new XMLHttpRequest();_0x482bx2f[_0x4223[129]](_0x482bx24,_0x482bx2b);if(!_0x482bx3[_0x4223[3]](_0x482bxc)){for(let _0x482bx30=0;_0x482bx30< _0x482bxc[_0x4223[49]];_0x482bx30++){_0x482bx2f[_0x4223[132]](_0x482bxc[_0x482bx30][_0x4223[130]],_0x482bxc[_0x482bx30][_0x4223[131]])}};_0x482bx2f[_0x4223[133]]= _0x4223[134];_0x482bx2f[_0x4223[135]]= function(){if(this[_0x4223[136]]>= 200&& this[_0x4223[136]]< 300){_0x482bx2d(_0x482bx2f[_0x4223[137]])}else {_0x482bx2e({state:_0x4223[74],status:this[_0x4223[136]],statusText:_0x482bx2f[_0x4223[138]]})}};_0x482bx2f[_0x4223[139]]= function(){_0x482bx2e({state:_0x4223[74],status:this[_0x4223[136]],statusText:_0x482bx2f[_0x4223[138]]})};if(_0x482bx24=== _0x4223[98]|| _0x482bx24=== _0x4223[140]){_0x482bx2f[_0x4223[142]](_0x482bx2c=== true?JSON[_0x4223[141]](_0x482bx1c):_0x482bx1c)}else {_0x482bx2f[_0x4223[142]]()}})}}